{"ast":null,"code":"var _jsxFileName = \"/Users/eashansoni/Documents/CollegeCoursework/CSCE483/AI-guided-coil-gun/user-interface/react-ui/src/components/GunMovement.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nimport Button from '@mui/material/Button';\nimport Grid from '@mui/material/Grid';\nimport settings from '../settings/settings.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GunMovement = _ref => {\n  _s();\n  let {\n    disabled\n  } = _ref;\n  const [socket, setSocket] = useState(null);\n  const socketRef = useRef(socket);\n  const processingKey = useRef(false);\n  const sendCommand = useCallback(direction => {\n    if (socketRef.current) {\n      socketRef.current.emit('gun-movement', direction);\n    }\n  }, []);\n  const handleKeyDown = useCallback(e => {\n    const keyToDirection = {\n      w: 'up',\n      a: 'left',\n      s: 'down',\n      d: 'right'\n    };\n    const direction = keyToDirection[e.key.toLowerCase()];\n    if (direction && !processingKey.current) {\n      processingKey.current = true;\n      sendCommand(direction);\n    }\n  }, [sendCommand]);\n  const handleKeyUp = useCallback(e => {\n    const validKeys = ['w', 'a', 's', 'd'];\n    if (validKeys.includes(e.key.toLowerCase()) && processingKey.current) {\n      processingKey.current = false;\n      sendCommand('stop');\n    }\n  }, [sendCommand]);\n  useEffect(() => {\n    const newSocket = io(settings.api.url);\n    setSocket(newSocket);\n    socketRef.current = newSocket;\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [handleKeyDown, handleKeyUp]);\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 10,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    style: {\n      position: 'absolute',\n      height: 'auto',\n      width: 'auto',\n      top: '90%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onMouseDown: () => sendCommand('up'),\n        onMouseUp: () => sendCommand('stop'),\n        disabled: disabled,\n        children: \"Up (W)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onMouseDown: () => sendCommand('down'),\n        onMouseUp: () => sendCommand('stop'),\n        disabled: disabled,\n        children: \"Down (S)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onMouseDown: () => sendCommand('left'),\n        onMouseUp: () => sendCommand('stop'),\n        disabled: disabled,\n        children: \"Left (A)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onMouseDown: () => sendCommand('right'),\n        onMouseUp: () => sendCommand('stop'),\n        disabled: disabled,\n        children: \"Right (D)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(GunMovement, \"SZgAHrUR8x70BjyZ/AzLQ5DLWHE=\");\n_c = GunMovement;\nexport default GunMovement;\nvar _c;\n$RefreshReg$(_c, \"GunMovement\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","io","Button","Grid","settings","jsxDEV","_jsxDEV","GunMovement","_ref","_s","disabled","socket","setSocket","socketRef","processingKey","sendCommand","direction","current","emit","handleKeyDown","e","keyToDirection","w","a","s","d","key","toLowerCase","handleKeyUp","validKeys","includes","newSocket","api","url","disconnect","window","addEventListener","removeEventListener","container","spacing","alignItems","justifyContent","style","position","height","width","top","children","item","onMouseDown","onMouseUp","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/eashansoni/Documents/CollegeCoursework/CSCE483/AI-guided-coil-gun/user-interface/react-ui/src/components/GunMovement.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nimport Button from '@mui/material/Button';\nimport Grid from '@mui/material/Grid';\nimport settings from '../settings/settings.json';\n\nconst GunMovement = ({ disabled }) => {\n  const [socket, setSocket] = useState(null);\n  const socketRef = useRef(socket);\n  const processingKey = useRef(false);\n\n  const sendCommand = useCallback((direction) => {\n    if (socketRef.current) {\n      socketRef.current.emit('gun-movement', direction);\n    }\n  }, []);\n\n  const handleKeyDown = useCallback(\n    (e) => {\n      const keyToDirection = {\n        w: 'up',\n        a: 'left',\n        s: 'down',\n        d: 'right',\n      };\n\n      const direction = keyToDirection[e.key.toLowerCase()];\n\n      if (direction && !processingKey.current) {\n        processingKey.current = true;\n        sendCommand(direction);\n      }\n    },\n    [sendCommand],\n  );\n\n  const handleKeyUp = useCallback(\n    (e) => {\n      const validKeys = ['w', 'a', 's', 'd'];\n\n      if (validKeys.includes(e.key.toLowerCase()) && processingKey.current) {\n        processingKey.current = false;\n        sendCommand('stop');\n      }\n    },\n    [sendCommand],\n  );\n\n  useEffect(() => {\n    const newSocket = io(settings.api.url);\n    setSocket(newSocket);\n    socketRef.current = newSocket;\n\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [handleKeyDown, handleKeyUp]);\n\n  return (\n    <Grid container spacing={10} alignItems=\"center\" justifyContent=\"center\"       \n      style={{\n      position:'absolute',\n      height: 'auto',\n      width: 'auto',\n      top: '90%',\n    }}>\n      <Grid item>\n        <Button\n          onMouseDown={() => sendCommand('up')}\n          onMouseUp={() => sendCommand('stop')}\n          disabled={disabled}\n        >\n          Up (W)\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          onMouseDown={() => sendCommand('down')}\n          onMouseUp={() => sendCommand('stop')}\n          disabled={disabled}\n        >\n          Down (S)\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          onMouseDown={() => sendCommand('left')}\n          onMouseUp={() => sendCommand('stop')}\n          disabled={disabled}\n        >\n          Left (A)\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          onMouseDown={() => sendCommand('right')}\n          onMouseUp={() => sendCommand('stop')}\n          disabled={disabled}\n        >\n          Right (D)\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default GunMovement;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}